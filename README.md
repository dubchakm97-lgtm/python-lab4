# Лабораторная работа №4 по Python

## Симуляция библиотеки с пользовательскими коллекциями и псевдослучайной моделью

Данный файл является `README.md` к лабораторной работе №4 по программированию на Python.  
Работа выполнена по **варианту 1 — «Библиотека»**.

Цель лабораторной работы — реализовать предметную модель библиотеки с использованием **пользовательских коллекций**, **наследования**, **магических методов** и **псевдослучайной симуляции**, демонстрирующей работу системы.

--------

## Структура репозитория

### 1. Основные файлы

- **`main.py`** — точка входа в программу, запуск симуляции  
- **`Books.py`** — классы Book, Tale, OnTheInternetBook. Класс Book описывает книгу, которая имеет определённого автора, год написания произведения, издательство, название, жанр и уникальный международный номер, который присваивается каждому изданию книги (ISBN). Класс Tale описывает буквально любое чтиво, которое потенциально может попасть в библиотеку, оно имеет уникальный международный номер, жанр и название. Класс OnTheInternetBook описывает книги, электронные версси которых можно найти на площадках ЛитРес и других. Такие книги, помимо автора, года издания, издательства, названия, жанра, уникального международного номера, также имеет рейтинг на интернет-площадке и уровень популярности на ней.
- **`BookCollection.py`** — пользовательская списковая коллекция книг  
- **`IndexDict.py`** — пользовательская словарная коллекция индексов, состоит из трех словарей, которые составляются по отдельным критериям: по номеру ISBN, по автору, по году издания. 
- **`Library.py`** — основной класс библиотеки

### 2. Служебные файлы

- `requirements.txt` – зависимости проекта и подключаемые сторонние библиотеки.
- `pyproject.toml` – файл с кратким описанием проекта.
- `.pre-commit-config.yaml` – фреймворк, который запускает проверку кода и файлов перед их коммитом на наличие ошибок.
- `.gitignore` – файл с перечнем файлов, которые GitHub при коммите должен игнорировать.
- `uv.lock` – автоматически сгенерированный файл, который фиксирует точные версии всех зависимостей проекта.

---

## Предметная модель

### Класс Book

TALE:

Поля:
- `title` – название произведения.
- `genre` – жанр произведения.
- `isbn` – уникальный международный номер издания.

---

BOOK:

Поля:
- `title` – название произведения.
- `genre` – жанр произведения.
- `isbn` – уникальный международный номер издания.
- `year` – год написания произведения.
- `author` – автор произведения.

---

OnTheInternetBook:

Поля:
- `title` – название произведения.
- `genre` – жанр произведения.
- `isbn` – уникальный международный номер издания.
- `year` – год написания произведения.
- `author` – автор произведения.
- `rating` – рейтинг книги на популярных электронных площадках.
- `popularity` – уровень популярности книги на электронных площадках.

---

### BookCollection

Пользовательская списковая коллекция, поддерживает:
- `add_book` – добавление книги
- `remove_book` – удаление книги
- `__len__` – длина списка со всеми книгами
- `__iter__` – магический метод, который возвращает итератор по всем книгам библиотеки
- `__getitem__` – магический метод, который возвращает элемент или срез элементов библиотеки по какому-либо критерию

---------

### IndexDict

Пользовательская словарная коллекция, поддерживает:
- индексацию по ISBN
- индексацию по автору
- индексацию по году
- `add` – добавление книги в словарь по соответствующему критерию: уникальный номер, автор, год написания
- `remove` – удаление книги из словаря по соответствующему критерию: уникальный номер, автор, год написания
- `__len__` – длина списка с книгами, соответствующим определенному критерию: уникальный номер, автор, год написания
- `__iter__` – магический метод, который возвращает итератор по книгам библиотеки, соответствующим определенному критерию: уникальный номер, автор, год написания
- `__getitem__` – магический метод, который возвращает словарь из всех книг библиотеки.


---------

### Library

Содержит:
- `BookCollection`
- `IndexDict`

Методы:
- Добавление и удаление книг
- Поиск по автору, году, жанру, ISBN
- Поиск книг/книги по критерию
- Проверка, содержится ли какая-то книга в библиотеке

-------

## Псевдослучайная симуляция

Функция:

```python
def run_simulation(steps: int = 20, seed: int | None = None) -> None
```

Особенности:
- используется `random`
- поддержка `seed`
- логирование всех событий
- одно случайное событие на шаг

Типы событий:
- добавление книги любого класса(Tale, Book, OnTheInternetBook)
- удаление книги любого класса(Tale, Book, OnTheInternetBook)
- поиск по критериям
- обновление индексов
- обработка ошибок

-------

## Запуск программы

```bash
python main.py
```